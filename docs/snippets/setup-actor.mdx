```typescript src/app.ts
import { worker, setup } from "rivetkit";

// Create worker
const counter = worker({
  state: { count: 0 },
  actions: {
    increment: (c, x: number) => {
      c.state.count += x;
      c.broadcast("newCount", c.state.count);
      return c.state.count;
    }
  }
});

// Create the application
export const registry = setup({
  workers: { counter },
  cors: { origin: "http://localhost:8080" }
});

// Export app type for client usage
export type Registry = typeof registry;
```

